(function($){$(".edd-ajax-search-search").each(function(){$(this).autocomplete({delay:250,minLength:parseInt(edd_ajax_search.minimum_characters),source:function(request,response){var form_serialized=$(this.element).closest('#edd-ajax-search-form').serialize();var autocomplete=$(this.element).closest('.edd-ajax-search-container').find('.edd-ajax-search-autocomplete');if(autocomplete.length){autocomplete.addClass('.edd-ajax-search-loading').html('<li><div class="edd-ajax-search-results-loader"><span class="edd-loading"></span></div></li>')}
$.ajax({url:edd_ajax_search.ajax_url+'?action=edd_ajax_search&nonce='+edd_ajax_search.nonce,type:'GET',dataType:'json',data:form_serialized,error:function(){response()},success:function(data){response(data)}})},select:function(event,ui){if(ui.item.link!==undefined){window.location.href=ui.item.link}}}).autocomplete('instance')._renderItem=function(ul,item){$(ul).addClass('edd-ajax-search-autocomplete').addClass('edd-ajax-search-open');return $("<li>").append(item.html).appendTo(ul)}});$('.edd-ajax-search-container').on('focusout',function(e){var $this=$(this);setTimeout(function(){if(!$(document.activeElement).closest('.edd-ajax-search-container').length){$this.find('.edd-ajax-search-autocomplete').removeClass('edd-ajax-search-open')}},100)});$('.edd-ajax-search-categories').change(function(){$(this).closest('#edd-ajax-search-form').find('#edd-ajax-search-search').autocomplete('search')})})(jQuery)